<div class="form-container">

  <h2>Team Registration Form</h2>

  <form [formGroup]="form" (ngSubmit)="submit()">

    <!-- Main team info -->
    <div class="form-group">
      <label>University / Institution *</label>
      <input formControlName="university" placeholder="Enter university/institution"/>
      <small *ngIf="form.get('university')?.invalid && form.get('university')?.touched">
        This field is required.
      </small>
    </div>

    <div class="form-group">
      <label>Faculty / College *</label>
      <input formControlName="faculty" placeholder="Enter faculty/college"/>
      <small *ngIf="form.get('faculty')?.invalid && form.get('faculty')?.touched">
        This field is required.
      </small>
    </div>

    <div class="form-group">
      <label>Team Name *</label>
      <input formControlName="teamName" placeholder="Enter your team name"/>
      <small *ngIf="form.get('teamName')?.invalid && form.get('teamName')?.touched">
        This field is required.
      </small>
    </div>

    <div class="form-group">
      <label>Number of Team Members *</label>
      <input type="number" formControlName="membersCount" placeholder="E.g. 2"/>
      <small *ngIf="form.get('membersCount')?.invalid && form.get('membersCount')?.touched">
        Please enter number of team members.
      </small>
    </div>

    <hr>

    <!-- ADD MEMBER BUTTON -->
    <button type="button" class="add-btn" (click)="addMember()">
      ‚ûï Add Team Member
    </button>

    <!-- Dynamic Member Forms -->
    <div formArrayName="members">
      <div *ngFor="let member of members.controls; let i = index" [formGroupName]="i" class="member-box">

        <h3>Member {{ i + 1 }} Details</h3>

        <div class="two-column">

          <div class="form-group">
            <label>Full Name (English) *</label>
            <input formControlName="fullNameEn" placeholder="John Doe"/>
            <small *ngIf="member.get('fullNameEn')?.invalid && member.get('fullNameEn')?.touched">
              Full name in English is required.
            </small>
          </div>

          <div class="form-group">
            <label>Full Name (Arabic) *</label>
            <input formControlName="fullNameAr" placeholder="ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ"/>
            <small *ngIf="member.get('fullNameAr')?.invalid && member.get('fullNameAr')?.touched">
              Full name in Arabic is required.
            </small>
          </div>

        </div>

        <div class="two-column">
          <div class="form-group">
            <label>Email *</label>
            <input formControlName="email" placeholder="example@mail.com"/>
            <small *ngIf="member.get('email')?.invalid && member.get('email')?.touched">
              Enter a valid email.
            </small>
          </div>

          <div class="form-group">
            <label>Mobile Phone *</label>
            <input formControlName="phone" placeholder="+20 100 000 0000"/>
            <small *ngIf="member.get('phone')?.invalid && member.get('phone')?.touched">
              Phone is required.
            </small>
          </div>
        </div>

        <div class="two-column">
          <div class="form-group">
            <label>Department *</label>
            <input formControlName="department"/>
            <small *ngIf="member.get('department')?.invalid && member.get('department')?.touched">
              Department is required.
            </small>
          </div>

          <div class="form-group">
            <label>Expected Graduation Year *</label>
            <input formControlName="graduationYear"/>
            <small *ngIf="member.get('graduationYear')?.invalid && member.get('graduationYear')?.touched">
              Graduation year is required.
            </small>
          </div>
        </div>

        <div class="two-column">
          <div class="form-group">
            <label>Gender *</label>
            <select formControlName="gender">
              <option value="" disabled>Select...</option>
              <option>Male</option>
              <option>Female</option>
            </select>
            <small *ngIf="member.get('gender')?.invalid && member.get('gender')?.touched">
              Gender is required.
            </small>
          </div>

          <div class="form-group">
            <label>Governorate *</label>
            <input formControlName="governorate"/>
            <small *ngIf="member.get('governorate')?.invalid && member.get('governorate')?.touched">
              Governorate is required.
            </small>
          </div>
        </div>

        <div class="form-group">
          <label>National ID Number *</label>
          <input formControlName="nationalId"/>
      <!-- REQUIRED -->
<small *ngIf="member.get('nationalId')?.hasError('required') && member.get('nationalId')?.touched">
  National ID is required.
</small>

<!-- INVALID FORMAT -->
<small *ngIf="member.get('nationalId')?.hasError('pattern') && member.get('nationalId')?.touched">
  National ID must start with 2 or 3 and be exactly 14 digits.
</small>


        </div>

        <button type="button" class="remove-btn" (click)="removeMember(i)">
          ‚ùå Remove Member
        </button>

      </div>
    </div>

 <div class="floating-button">
  <button type="button" class="review-btn" (click)="goToReview()">
   üëÄ Review Your Data
  </button>
</div>

  </form>

  <div class="success" *ngIf="success">{{ success }}</div>
  <div class="error" *ngIf="error">{{ error }}</div>

</div>
